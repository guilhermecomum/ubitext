<template name="docItem">
  <div class="docMeta">
    {{> docMeta}}
  </div>

  <div class="editors">
    {{> editingUsers}}
  </div>

  <div class="container">
    <div class="editor">
      {{> editor}}
    </div>
    <div class="preview">
      {{> viewer}}
    </div>
  </div>

  <div class="comments-form">
    {{> insertCommentForm}}
  </div>
</template>

<template name="docMeta">
  {{# with documents}}
  <span class="title">{{> editableText collection="documents" field="title"}}</span>

  {{#if canEdit}}
  <div class="checkbox">
    <label for="private">
      <input name="private" class="js-toggle-private" type="checkbox" checked="{{isPrivate}}"> Private?
    </label>
  </div>
  {{/if}}
  {{/with}}
</template>

<template name="editingUsers">
  Editors:
  {{#each users}}
  <span class="label success">{{username}}</span>
  {{/each}}
</template>

<template name="editor">
  {{> sharejsCM docid=docid onRender=config id="editor"}}
</template>

<template name="insertCommentForm">
  {{# autoForm collection="Comments" id="insertCommentForm" type="method" meteormethod="addComment"}}
  <fieldset>
    <legend>Comment</legend>
    {{> afQuickField name="title"}}
    {{> afQuickField name="body" value="Write your comment here"}}
    {{> afQuickField name="docid" value=docid type="hidden"}}
  </fieldset>
  <button type="submit" class="submit">Insert</button>
  {{/autoForm}}

</template>

<template name="viewer">
  <iframe id="viewer_iframe" class="preview-frame" height="100%" width="100%"></iframe>
</template>
